\NeedsTeXFormat{LaTeX2e}[1996/06/01]

% Last edited 26 February, 2012 by A. Chan

\ProvidesPackage{drangsymbols}[2012/05/12 v1.2 alexwlchan]

% \begingroup
%     \makeatletter
%     \@for\theoremstyle:=definition,remark,plain\do{%
%         \expandafter\g@addto@macro\csname th@\theoremstyle\endcsname{%
%             \setlength\thm@postskip{0pt}
%             }%
%         }
% \endgroup
% 
% % \begingroup
% %     \makeatletter
% %     \@for\theoremstyle:=proof\do{%
% %         \expandafter\g@addto@macro\csname th@\theoremstyle\endcsname{%
% %             \setlength\thm@preskip{0pt}
% % 			\setlength\thm@postskip{0pt}
% %             }%
% %         }
% % \endgroup
% 
% \begingroup
%     \makeatletter
%     \@for\theoremstyle:=remark\do{%
%         \expandafter\g@addto@macro\csname th@\theoremstyle\endcsname{%
%             \setlength\thm@preskip\parskip
%             }%
%         }
% \endgroup

% \RequirePackage{amsthm}
% \theoremstyle{plain}

\RequirePackage{mdframed,color,tikz}

\definecolor{grey60}{rgb}{0.7,0.7,0.7}

\newenvironment{theorem}[1][]{%
 \stepcounter{equation}%
  \ifstrempty{#1}%
  {\mdfsetup{%
    frametitle={%
       \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=grey60]
        {\strut Theorem~\theequation};}}
  }%
  {\mdfsetup{%
     frametitle={%
       \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=grey60]
        {\strut Theorem~\theequation:~#1};}}%
   }%
   \mdfsetup{linecolor=grey60,%
   			 skipabove=1.3\parskip,skipbelow=0.5\parskip,
             linewidth=2pt,topline=true,
             frametitleaboveskip=\dimexpr-\ht\strutbox\relax,}
   \begin{mdframed}[]\relax%
   }{\end{mdframed}}

\newenvironment{definition}[1][]{%
 \stepcounter{equation}%
  \global\mdfdefinestyle{definition}{%
  	linecolor=grey60,linewidth=5pt,%
	skipabove=0.4\parskip,skipbelow=0.4\parskip,
  	topline=false,rightline=false,bottomline=false
  }
  \ifstrempty{#1}%
  {\begin{mdframed}[style=definition]
  {\bfseries{Definition~\theequation.}}
  \relax}
  {\begin{mdframed}[style=definition]
  {\bfseries{Definition~\theequation}} (#1){\bfseries{.}}\relax%
}}{\end{mdframed}}

\global\mdfdefinestyle{lemma}{%
	linecolor=grey60,linewidth=1.5pt,
	skipabove=0.5\parskip,skipbelow=0.5\parskip,
	topline=false,rightline=false,bottomline=false
}

\newenvironment{lemma}[1][]{%
 \stepcounter{equation}%
  \ifstrempty{#1}%
  {\begin{mdframed}[style=lemma]
  {\bfseries{Lemma~\theequation.}}
  \relax}
  {\begin{mdframed}[style=lemma]
  {\bfseries{Lemma~\theequation}} (#1){\bfseries{.}}\relax%
}}{\end{mdframed}}

\newenvironment{example}[1][]{%
 \stepcounter{equation}%
  \ifstrempty{#1}%
  {\begin{mdframed}[style=lemma]
  {\bfseries{Example~\theequation.}}
  \relax}
  {\begin{mdframed}[style=lemma]
  {\bfseries{Example~\theequation}} (#1){\bfseries{.}}\relax%
}}{\end{mdframed}}

\newenvironment{examples}[1][]{%
 \stepcounter{equation}%
  \ifstrempty{#1}%
  {\begin{mdframed}[style=lemma]
  {\bfseries{Examples~\theequation.}}
  \relax}
  {\begin{mdframed}[style=lemma]
  {\bfseries{Examples~\theequation}} (#1){\bfseries{.}}\relax%
}}{\end{mdframed}}

\newenvironment{exercise}[1][]{%
 \stepcounter{equation}%
  \ifstrempty{#1}%
  {\begin{mdframed}[style=lemma]
  {\bfseries{Exercise~\theequation.}}
  \relax}
  {\begin{mdframed}[style=lemma]
  {\bfseries{Exercise~\theequation}} (#1){\bfseries{.}}\relax%
}}{\end{mdframed}}

\newenvironment{exercises}[1][]{%
 \stepcounter{equation}%
  \ifstrempty{#1}%
  {\begin{mdframed}[style=lemma]
  {\bfseries{Exercises~\theequation.}}
  \relax}
  {\begin{mdframed}[style=lemma]
  {\bfseries{Exercises~\theequation}} (#1){\bfseries{.}}\relax%
}}{\end{mdframed}}

\newenvironment{question}[1][]{%
 \item #1}

\newenvironment{proposition}[1][]{%
 \stepcounter{equation}%
  \ifstrempty{#1}%
  {\begin{mdframed}[style=lemma]
  {\bfseries{Proposition~\theequation.}}
  \relax}
  {\begin{mdframed}[style=lemma]
  {\bfseries{Proposition~\theequation}} (#1){\bfseries{.}}\relax%
}}{\end{mdframed}}


\RequirePackage{amsthm}

\theoremstyle{plain}
\newtheorem{axiom}[equation]{Axiom}
\newtheorem*{aim}{Aim}
\newtheorem{corollary}[equation]{Corollary}
\newtheorem{assertion}[equation]{Assertion}
\newtheorem*{claim}{Claim}

\theoremstyle{definition}
\newtheorem{problem}[equation]{Problem}

\theoremstyle{remark}
\newtheorem*{remark}{Remark}
\newtheorem*{proof*}{Proof}
\newtheorem*{remarks}{Remarks}
\newtheorem*{note}{Note}






% 

% 
% 
% \newtheorem{task}{Task}
% 
% \theoremstyle{definition}
% \newtheorem*{definition}{Definition}
% \newtheorem*{openproblem}{Open problem}
% \newtheorem{exercise}{$\blacktriangleright$
% 					   \hypertarget{Ex\theexercise}{Exercise}}[lecture]
% 


% Solutions
\RequirePackage{answers}
\Newassociation{solution}{Solution}{exSolutions}
\renewenvironment{Solution}[1]{%\small%
	\begin{trivlist} \item \textit{Solution}~#1.}{%
	\hspace*{\fill} $\blacksquare$\end{trivlist}}

% Warnings
\newenvironment{warning}{%
	\begin{trivlist} \item[] \noindent%
	\begingroup\hangindent=2pc\hangafter=-2
	\clubpenalty=10000%
	\hbox to0pt{\hskip-\hangindent\dbend\hfill}\ignorespaces
	\textit{Warning}.}%
	{\endgraf\endgroup\end{trivlist}}

\newcommand{\isin}{\ensuremath{\in}}
\newcommand{\inch}{\ensuremath{{}^{\prime\prime}}}
\newcommand{\ft}{\ensuremath{{}^\prime}}
\newcommand{\by}{\ensuremath{\!\times\!}}
\newcommand{\degrees}{\ensuremath{{}^\circ}}
\newcommand{\lbin}{\ensuremath{\mathrm{lb \! \cdot \! in}}}
\newcommand{\inlb}{\ensuremath{\mathrm{in \! \cdot \! lb}}}
\newcommand{\kin}{\ensuremath{\mathrm{k \! \cdot \! in}}}
\newcommand{\ink}{\ensuremath{\mathrm{in \! \cdot \! k}}}
\newcommand{\lbft}{\ensuremath{\mathrm{lb \! \cdot \! ft}}}
\newcommand{\ftlb}{\ensuremath{\mathrm{ft \! \cdot \! lb}}}
\newcommand{\kft}{\ensuremath{\mathrm{k \! \cdot \! ft}}}
\newcommand{\ftk}{\ensuremath{\mathrm{ft \! \cdot \! k}}}
\newcommand{\Nmm}{\ensuremath{\mathrm{N \! \cdot \! mm}}}
\newcommand{\Nm}{\ensuremath{\mathrm{N \! \cdot \! m}}}
\newcommand{\degree}{\ensuremath{^\circ}}

\newcommand{\sfrac}[2]{\ensuremath{\leavevmode\kern0em\raise.5ex
         \hbox{\mbox{\fontsize\sf@size\z@
                           \selectfont#1}}\kern-.05em
         /\kern-.1em
          \hbox{\mbox{\fontsize\sf@size\z@
                            \selectfont#2}}}}

\RequirePackage{amssymb,fakeMnSymbol}

\newcommand{\disp}{\displaystyle}

\newcommand{\dlim}{\displaystyle\lim}
\newcommand{\del}{\partial}
\newcommand{\Del}{\nabla}

\newcommand{\powerset}{\MNSpowerset}

\renewcommand{\bf}[1]{\ensuremath{\mathbf{#1}}}
\renewcommand{\sf}[1]{\ensuremath{\mathsf{#1}}}
\renewcommand{\rm}[1]{\ensuremath{\mathrm{#1}}}
\renewcommand{\cal}[1]{\ensuremath{\mathcal{#1}}}
\newcommand{\bb}[1]{\ensuremath{\mathbb{#1}}}
\renewcommand{\tt}[1]{\ensuremath{\mathtt{#1}}}
\newcommand{\mono}[1]{{\small\texttt{#1}}}
\renewcommand{\bold}[1]{\ensuremath{\boldsymbol{#1}}}
\renewcommand{\frak}[1]{\ensuremath{\mathfrak{#1}}}

\renewcommand{\d}{\dif}

\newcommand{\N}{\bb{N}}
\newcommand{\Z}{\bb{Z}}
\newcommand{\Q}{\bb{Q}}
\newcommand{\R}{\bb{R}}
\renewcommand{\C}{\bb{C}}
\newcommand{\F}{\bb{F}}

\newcommand{\Rm}{\bb{R}^m}
\newcommand{\Rn}{\bb{R}^n}
\newcommand{\Cn}{\bb{C}^n}
\newcommand{\Fm}{\bb{F}^m}
\newcommand{\Fn}{\bb{F}^n}

\newcommand{\iN}{\in\bb{N}}
\newcommand{\iZ}{\in\bb{Z}}
\newcommand{\iQ}{\in\bb{Q}}
\newcommand{\iR}{\in\bb{R}}
\newcommand{\iRn}{\in\bb{R}^n}
\newcommand{\iRm}{\in\bb{R}^m}
\newcommand{\iC}{\in\bb{C}}
\newcommand{\iF}{\in\bb{F}}

\DeclareMathOperator*{\Tr}{Tr}
\DeclareMathOperator*{\rank}{rank}
\DeclareMathOperator*{\sgn}{sgn}
\DeclareMathOperator*{\Sym}{Sym}
\DeclareMathOperator*{\hcf}{hcf}
\DeclareMathOperator*{\lcm}{lcm}
\DeclareMathOperator*{\id}{id}
\DeclareMathOperator*{\Curl}{curl}
\DeclareMathOperator*{\Grad}{grad}
\DeclareMathOperator*{\Div}{div}

\DeclareMathOperator*{\sech}{sech}
\DeclareMathOperator*{\cosech}{cosech}
\DeclareMathOperator*{\cosec}{cosec}

\newcommand{\grad}{\bold{\nabla}}
\newcommand{\cross}{\times}

\newcommand{\f}[2]{\frac{#1}{#2}}
\newcommand{\df}[2]{\dfrac{#1}{#2}}
\newcommand{\tf}[2]{\textstyle\frac{#1}{#2}}
\newcommand{\dy}[2]{\od{#1}{#2}}
\newcommand{\ddy}[2]{\od[2]{#1}{#2}}
\newcommand{\pa}[2]{\pd{#1}{#2}}
\newcommand{\pab}[3]{\md{2}{#1}{1}{#2}{1}{#3}}
\newcommand{\ppa}[2]{\pd[2]{#1}{#2}}
\newcommand{\mat}[1]{\begin{pmatrix} #1 \end{pmatrix}}
\newcommand{\vmat}[1]{\begin{vmatrix} #1 \end{vmatrix}}

\newcommand{\wiki}[2]{\href{http://en.wikipedia.org/wiki/#1}{\emph{#2}}}
\newcommand{\wikirm}[2]{\href{http://en.wikipedia.org/wiki/#1}{#2}}

\newcommand{\vvert}[1]{\left\vert #1 \right\vert}
\newcommand{\VVert}[1]{\left\Vert #1 \right\Vert}

\newcommand{\isom}{\cong}
\newcommand{\isomto}{\xrightarrow{\sim}}
\newcommand{\isomfrom}{\xleftarrow{\sim}}

\newcommand{\surjto}{\twoheadrightarrow}
\newcommand{\surjfrom}{\twoheadleftarrow}

\newcommand{\injto}{\hookrightarrow}
\newcommand{\injfrom}{\hookrightarrow}

% Group operators

\DeclareMathOperator*{\stab}{stab}
\DeclareMathOperator*{\ccl}{ccl}
\DeclareMathOperator*{\orb}{orb}

% The slightly hacky optional arguments for Orb and Stab are taken from
% http://www.hanskalabs.net/posts/latex-newcommand-optional-argument/

\def\Orb#1{\def\tempa{#1}\futurelet\next\Orb@i}% Save first argument
\def\Orb@i{\ifx\next\bgroup\expandafter\Orb@ii\else\expandafter\Orb@end\fi}%Check brace
\def\Orb@ii#1{\textstyle\orb_{#1}(\tempa)}%Two args
\def\Orb@end{\orb(\tempa)}%Single args

\def\Stab#1{\def\tempa{#1}\futurelet\next\Stab@i}% Save first argument
\def\Stab@i{\ifx\next\bgroup\expandafter\Stab@ii\else\expandafter\Stab@end\fi}%Check brace
\def\Stab@ii#1{\textstyle\stab_{#1}(\tempa)}%Two args
\def\Stab@end{\stab(\tempa)}%Single args

\def\CCL#1{\def\tempa{#1}\futurelet\next\CCL@i}% Save first argument
\def\CCL@i{\ifx\next\bgroup\expandafter\CCL@ii\else\expandafter\CCL@end\fi}%Check brace
\def\CCL@ii#1{\textstyle\ccl_{#1}(\tempa)}%Two args
\def\CCL@end{\ccl(\tempa)}%Single args

\def\Centra#1{\def\tempa{#1}\futurelet\next\Centra@i}% Save first argument
\def\Centra@i{\ifx\next\bgroup\expandafter\Centra@ii\else\expandafter\Centra@end\fi}%Check brace
\def\Centra@ii#1{\cal{Z}_{#1}(\tempa)}%Two args
\def\Centra@end{\cal{Z}(\tempa)}%Single args

\newcommand{\Centre}[1]{\cal{Z}(#1)}

\newcommand{\centra}{\cal{Z}}
\newcommand{\centre}{\cal{Z}}
\newcommand{\GL}{\text{GL}}
\newcommand{\SL}{\text{SL}}
\newcommand{\SO}{\text{SO}}

\newcommand{\Trans}{{\sf{T}}}

\newcommand{\qend}{\hfill $\blacksquare$}

% Setup the matha font (from mathabx.sty)
\DeclareFontFamily{U}{matha}{\hyphenchar\font45}
\DeclareFontShape{U}{matha}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * matha
      <10.95> matha10 <12> <14.4> <17.28> <20.74> <24.88> matha12
      }{}
\DeclareSymbolFont{matha}{U}{matha}{m}{n}

% Define a subset character from that font (from mathabx.dcl) to completely replace the \subset character, you can replace \varsubset with \subset
\DeclareMathSymbol{\notdivides}{3}{matha}{"1F}
\DeclareMathSymbol{\divides}{3}{matha}{"17}

% Some code for the titlepage
% This takes the format {%part}{%term}{%course name}{%lecturer_initials}{%lecturer_surname}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

% At some point I should roll these together

\newcommand{\NotesTitle}[6]
{\begin{center}

\thispagestyle{empty}

\textsc{\textcolor{white}{AAA}}\\[1.5cm]
	{\large Part #1 of the Mathematical Tripos of}\\[0.1cm]
	{\large the University of Cambridge}\\[0.5cm] % Major heading such as course name
	{\large #2}\\[0.5cm] % Minor heading such as course title
	
	\HRule \\[0.4cm]
	{\huge \sffamily\bfseries #3}\\[0.4cm] % Title of your document
	\HRule \\[1.5cm]
	
	\begin{minipage}{0.4\textwidth}
	\begin{flushleft} \large
	\emph{Lectured by:}\\
	#4~\textsc{#5} % Your name
	\end{flushleft}
	\end{minipage}
	~
	\begin{minipage}{0.4\textwidth}
	\begin{flushright} \large
	\emph{Notes by:} \\
	Alex \textsc{Chan} % Supervisor's Name
	\end{flushright}
	\end{minipage}\vfill
	
	{\large Comments and corrections should be sent to \href{mailto:awlc2@cam.ac.uk}{awlc2@cam.ac.uk}.} \\[0.5cm] %
	{\large This work is licensed under a \href{http://creativecommons.org/licenses/by-nc-sa/3.0/}{Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License}.} \\[0.5cm] %
	{\large The following resources are \emph{not} endorsed by the University of Cambridge.} \\[0.5cm] %
	{\large Printed \today.}\\[3cm] %
	
	\vfill
	\end{center}
	
		\pagebreak
	
	\thispagestyle{empty}
	
	#6
	
	\setcounter{page}{0}
	
	\newpage}

\newcommand{\NotesSubTitle}[7]
{\begin{center}

\thispagestyle{empty}

\textsc{\textcolor{white}{AAA}}\\[1.5cm]
	{\large Part #1 of the Mathematical Tripos of}\\[0.1cm]
	{\large the University of Cambridge}\\[0.5cm] % Major heading such as course name
	{\large #2}\\[0.5cm] % Minor heading such as course title
	
	\HRule \\[0.4cm]
	{\huge \sffamily\bfseries #3}\\[0.4cm]
	
	{\large \sffamily\bfseries #7}\\[0.4cm] % Title of your document
	\HRule \\[1.5cm]
	
	\begin{minipage}{0.4\textwidth}
	\begin{flushleft} \large
	\emph{Lectured by:}\\
	#4~\textsc{#5} % Your name
	\end{flushleft}
	\end{minipage}
	~
	\begin{minipage}{0.4\textwidth}
	\begin{flushright} \large
	\emph{Notes by:} \\
	Alex \textsc{Chan} % Supervisor's Name
	\end{flushright}
	\end{minipage}\vfill
	
	{\large Comments and corrections should be sent to \href{mailto:awlc2@cam.ac.uk}{awlc2@cam.ac.uk}.} \\[0.5cm] %
	{\large This work is licensed under a \href{http://creativecommons.org/licenses/by-nc-sa/3.0/}{Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License}.} \\[0.5cm] %
	{\large The following resources are \emph{not} endorsed by the University of Cambridge.} \\[0.5cm] %
	{\large Printed \today.}\\[3cm] %
	
	\vfill
	\end{center}
	
		\pagebreak
	
	\thispagestyle{empty}
	
	#6
	
	\setcounter{page}{0}
	
	\newpage}

\newcommand{\ExamplesTitle}[3]
{{\LARGE\bfseries\sffamily{#1, Examples Sheet #2}}

{\large\bfseries\sffamily{FAO: #3 \\
From: Alex Chan \\
Printed: \today}}

\thispagestyle{empty}}

\usepackage{marginnote}
\newcommand{\datemarker}[1]{\marginnote{\textsf{#1}}}